<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Delegate Keys</title>
    <link rel="stylesheet" href="box.css" />
    <link rel="stylesheet" href="oneofus.css" />
  </head>
  <body>
    <main>
      <h1>Crypto Trust</h1>

      <p>
        When you vouch for someone else by scanning their ONE-OF-US.NET's phone
        app (or a QR code they shared with you), the ONE-OF-US.NET phone app
        uses your private key to sign and publish a structured statement that
        references their identity key, names them, and affirms that they're
        "human, capable, and acting in good faith".
      </p>

      <div class="text-iframe-2col">
        <div class="content">
          <p>Lisa trusts her mother.</p>
          <p>(Still vapid; we don't know whose keys those are.)</p>
        </div>

        <div class="embed">
          <iframe id="flutterApp"></iframe>
        </div>
      </div>
    </main>

    <script src="iframe_helper.js"></script>
    <script>
      /* 
      Embed the Flutter app in the iframe using IframeHelper.
      */
      (function () {
        const iframe = document.getElementById("flutterApp");
        if (!iframe) return;

        const verify = `{
  "statement": "net.one-of-us",
  "time": "2024-05-24T07:00:00.000Z",
  "I": {
    "crv": "Ed25519",
    "kty": "OKP",
    "x": "cLpFiVQn_bAXK7Yg2JW5oFyibjZXqw6fRopx8xdbRkE"
  },
  "trust": {
    "crv": "Ed25519",
    "kty": "OKP",
    "x": "75V19wpMrCJgBIbNeVZ1IX0BxlnjYkmJGrDMowu6yEE"
  },
  "with": {
    "moniker": "Mom"
  },
  "previous": "884052c4b6490eb3440115fe76fd2040b1747999",
  "signature": "e908846169c1dd4a42f39e43dbe061adaace0747cd008e4fb574e83de7b91cae99966673a2f773c4b51fd16d24cb995fac5d3aaa66ec6ca939362c1a79493200"
}`;

        iframe.src = IframeHelper.constructUrl({
          verify: verify,
        });
      })();
    </script>
  </body>
</html>
