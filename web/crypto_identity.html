<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="stylesheet" href="box.css" />
    <link rel="stylesheet" href="oneofus.css" />
  </head>
  <!-- TODO: 
   reduce headings: cryptic and come in pairs
   embed Milhouse@nerdster.org recognized by Lisa
   -->
  <body>
    <main>
      <h1>Lisa Recognizes Identities!</h1>
      <div class="text-iframe-2col">
        <div class="content">
          <p>
            <span class="json-text">"Bart@nerdster.org"</span>
            is Bart.
            <br />
            We see <span class="json-text">"Bart@nerdster.org"</span> because
            Bart used the Nerdster to sign and publish the follow statement.
            (Same dude as <span class="json-text">"Bart@ebay.com"</span> or
            <span class="json-text">"Bart@discord.com"</span> would be.)
          </p>
          <p>
            <span class="json-text">"Milhouse"</span> is Milhouse (simply, with
            no @domain) because that's who Bart wants to follow: a person, not
            an account.
          </p>
        </div>

        <div class="embed">
          <iframe id="flutterApp"></iframe>
        </div>
      </div>
      <h1>Identity Layer ties It All Together</h1>
      <p>It distributes identity keys, which are signed by our keys.</p>
      <p>
        "Milhouse" and "Bart" are not available usernames that some users
        grabbed for their accounts at nerdster.org.
        <br />
        They are who Lisa's network says they are, backed by a complete,
        cryptographic chain grounded by Lisa's own identity.
      </p>
      <p>
        The Nerdster follow statetement above is not part of the identity layer,
        rather it leverages the identity layer.
        <br />Examples:
        <a id="marge-banana-rate" href="#">Marge rates a recipe</a>,
        <a id="bart-follow-milhouse-social" href="#">Bart follows Milhouse</a>.
      </p>

      <p>
        Here are the same statements shown in the "Vouch, Delegate" box, but
        this time interpreted by the Nerdster from Lisa's Point of View:
        <a id="lisa-trust-mom" href="#">Trust</a>,
        <a id="marge-block-sideshow" href="#">Block</a>,
        <a id="homer-replace-key" href="#">Replace</a>,
        <a id="marge-delegate" href="#">Delegate</a>,
        <a id="sideshow-revoke-marge-delegate" href="#">(Delegate and revoke)</a
        >.
      </p>

      <p>
        (On the
        <!-- TODO: nerdster.org "hosting": { "cleanUrls": true, ... -->
        <a href="https://nerdster.org/home.html" target="_blank"
          >Simpsons Bot Farm</a
        >, Lisa scanned her mom's phone, Marge scanned her kids' phones, and
        Bart scanned Milhouse's phone.)
      </p>
      <p><em>I am who your network says I am, across all services.</em></p>

      <h1>Your public key is your identity</h1>
      <p>
        You own your crypto key pair. It's yours, you own it. Use it to sign
        whatever you want.
        <br />
        The public component of your own public/private cryptographic key pair
        is your identity.
      </p>

      <h2>Crypto Keys are Cryptic</h2>
      <p>
        Unlike the usernames and passwords we're used to, public/private
        cryptographic key pairs are long and cryptic and can't practically be
        spoken or memorized. This is why we use QR codes (or occasionally
        copy/paste) to communicate them.
      </p>

      <ul>
        <li>QR codes allow us to communicate public keys using our phones.</li>
        <li>JSON format is used when computers communicate with each other.</li>
      </ul>

      <h2>Sample public key</h2>

      <div class="qr-json-2col">
        <img src="img/sample.png" alt="sample public key" />

        <pre><code>{
  "crv": "Ed25519",
  "kty": "OKP",
  "x": "rHT5B3q3rBCtNUaSBwT7DxT2Y0Q6fgvmhNKbVhJ_BtQ"
}
        </code></pre>
      </div>

      <h2>Sample public/private key pair</h2>
      <div class="qr-json-2col">
        <p>(We don't scan each other's private keys)</p>

        <pre><code>{
  "crv": "Ed25519",
  "kty": "OKP",
  "x": "rHT5B3q3rBCtNUaSBwT7DxT2Y0Q6fgvmhNKbVhJ_BtQ",
  "d": "_MaCrtWx2jHTOrujWXVeihaBBJHF09QUxzwnk6GGiEQ"
}
        </code></pre>
      </div>

      <h2>They come in Pairs</h2>
      <p>
        Lose your private key and your public key is now abandoned. You'll have
        to get a new pair, can't just replace the private key. (We address this
        with the "replace" statement; it's complicated.)
      </p>
    </main>

    <script src="iframe_helper.js"></script>
    <script src="data/demoData.js"></script>
    <script src="verify_helper.js"></script>
    <script>
      (function () {
        const iframe = document.getElementById("flutterApp");
        if (!iframe) return;

        const identity = demoData["lisa"];

        const verify = demoData["bart-follow-milhouse-social"];
        console.log("verify:", verify);

        iframe.src = IframeHelper.constructUrl({
          identity: JSON.stringify(identity),
          verify: JSON.stringify(verify, null, 2),
          verifyImmediately: "true",
          showCrypto: "true",
          skipCredentialsDisplay: "true",
        });

        VerifyHelper.setupListeners([
          "marge-banana-rate",
          "lisa-trust-mom",
          "marge-block-sideshow",
          "homer-replace-key",
          "marge-delegate",
          "sideshow-revoke-marge-delegate",
          "bart-follow-milhouse-social",
        ]);
      })();
    </script>
  </body>
</html>
