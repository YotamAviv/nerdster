<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Cryptography: Signing, Hashing</title>
    <link rel="stylesheet" href="box.css" />
    <link rel="stylesheet" href="oneofus.css" />
  </head>
  <!-- TODO: 
   reduce headings: cryptic and come in pairs
   emged Milhouse@nerdster.org recognized by Lisa
   -->
  <body>
    <main>
      <h1>Lisa Recognizes! Bart, Milhouse,</h1>
      <div class="text-iframe-2col">
        <div class="content">
          <p>
            "Milhouse" and "Bart" are not an available usernames that some users
            picked on the Nerster service.
            <br />
            They're who Lisa's network says they are.
          </p>
          <p>
            "Bart@nerdster.org" is Bart.
            <br />(Same as "Bart@ebay.com", "Bart@discord.com", etc..)
          </p>
          <p>I am who your network says I am (across all services).</p>
          <p>
            "Bart@nerdster.org" because Bart stated that using the Nerdster, and
            the Nerdster signed it using the crypto key pair that Milhouse
            delegated to it.
          </p>
          <p>
            "Milhouse" simply (with no @domain) because that's who Bart wants to
            follow: a person, not an account.
          </p>
        </div>

        <div class="embed">
          <iframe id="flutterApp"></iframe>
        </div>
      </div>

      <h1>Your public key is your identity</h1>
      <p>
        You own your crypto key pair. It's yours, you own it. Use it to sign
        whatever you want.
        <br />
        The public component of your own public/private cryptographic key pair
        is your identity.
      </p>

      <h2>Crypto Keys are Cryptic</h2>
      <p>
        Unlike the usernames and passwords were used to, public/private
        cryptographic key pair are long and cryptic and can't practically be
        spoken or memorized. This is why we use QR codes (or occasionally
        copy/paste) to communicate them.
      </p>

      <ul>
        <li>QR code allows us to communicate public keys using our phones.</li>
        <li>JSON format is used when computers communicate with each other.</li>
      </ul>

      <h2>Sample public key</h2>

      <div class="qr-json-2col">
        <img src="img/sample.png" alt="sample public key" />

        <pre><code>{
  "crv": "Ed25519",
  "kty": "OKP",
  "x": "rHT5B3q3rBCtNUaSBwT7DxT2Y0Q6fgvmhNKbVhJ_BtQ"
}
        </code></pre>
      </div>

      <h2>Sample public/private key pair</h2>
      <div class="qr-json-2col">
        <p>(We don't scan each other's private keys)</p>

        <pre><code>{
  "crv": "Ed25519",
  "kty": "OKP",
  "x": "rHT5B3q3rBCtNUaSBwT7DxT2Y0Q6fgvmhNKbVhJ_BtQ",
  "d": "_MaCrtWx2jHTOrujWXVeihaBBJHF09QUxzwnk6GGiEQ"
}
        </code></pre>
      </div>

      <h2>They come in Pairs</h2>
      <p>
        Lose your private key and your public key is now abandoned. You'll have
        to get a new pair, can't just replace the private key. (We address this
        with the "replace" statement; it's complicated.)
      </p>
    </main>

    <script src="iframe_helper.js"></script>
    <script>
      (function () {
        const iframe = document.getElementById("flutterApp");
        if (!iframe) return;

        const identity = {
          crv: "Ed25519",
          kty: "OKP",
          x: "cLpFiVQn_bAXK7Yg2JW5oFyibjZXqw6fRopx8xdbRkE",
        };

        const verify2 = `{
  "statement": "org.nerdster",
  "time": "2024-07-23T07:00:00.000Z",
  "I": {
    "crv": "Ed25519",
    "kty": "OKP",
    "x": "B-mZ-Ydp8WY0u5yt1WytnsUeE0wYnntZxGbr81Enwp4"
  },
  "follow": {
    "crv": "Ed25519",
    "kty": "OKP",
    "x": "mEwiqG7o46sVysAtb5z4x-jLfIIW_YnWH3Y5yMhPBcg"
  },
  "with": {
    "contexts": {
      "social": 1
    }
  },
  "previous": "2ff7cf81d7023453d9d9eb3a4b2dc591a9e8e9e9",
  "signature": "0c671a18e2ffe9ee82eb5b3b1ef75329b107a4e091f628a667a6d161a55b3289e0840ac25323e6af90a09b0e0dad2fddd7b578423a40ec91c3211371278e8c0f"
}`;

        iframe.src = IframeHelper.constructUrl({
          identity: JSON.stringify(identity),
          verify2: verify2,
          showCrypto: "true",
          skipCredentialsDisplay: "true",
        });
      })();
    </script>
  </body>
</html>
